<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Travel Map - Chiang Mai to Phitsanulok</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&family=Prompt:wght@300;400;600&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --bg-color: #0f172a;
            --card-bg: rgba(30, 41, 59, 0.7);
            --accent-color: #38bdf8;
            --text-color: #f1f5f9;
        }

        body,
        html {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
            font-family: 'Outfit', 'Prompt', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        #header {
            padding: 1rem 2rem;
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(10px);
            z-index: 1000;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        #header h1 {
            margin: 0;
            font-size: 1.5rem;
            font-weight: 600;
            background: linear-gradient(to right, #38bdf8, #818cf8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        #map {
            flex-grow: 1;
            width: 100%;
            z-index: 1;
        }

        #footer {
            padding: 0.75rem 2rem;
            background: rgba(15, 23, 42, 0.9);
            text-align: center;
            font-size: 0.875rem;
            color: #94a3b8;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 1000;
        }

        /* Leaflet Dark Theme Overrides */
        .leaflet-container {
            background: #111 !important;
        }

        .leaflet-tile-pane {
            filter: brightness(0.6) invert(1) contrast(3) hue-rotate(200deg) saturate(0.3) brightness(0.7);
        }

        .leaflet-popup-content-wrapper {
            background: var(--card-bg);
            color: var(--text-color);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 5px;
        }

        .leaflet-popup-tip {
            background: var(--card-bg);
        }

        .popup-info h3 {
            margin: 0 0 8px 0;
            color: var(--accent-color);
            font-size: 1.1rem;
        }

        .popup-info p {
            margin: 4px 0;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .battery-tag {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-top: 5px;
        }

        .bat-low {
            background: #ef4444;
        }

        .bat-mid {
            background: #f59e0b;
        }

        .bat-high {
            background: #10b981;
        }
    </style>
</head>

<body>

    <div id="header">
        <h1>GPS Journey: Chiang Mai ‚Üí Phitsanulok</h1>
        <div style="font-size: 0.9rem; color: #94a3b8;">Feb 27-28, 2026</div>
    </div>

    <div id="map"></div>

    <div id="footer">
        Created by ü§ñ <strong>Gravity</strong> ‚Äî Oracle for Perth | Powered by Leaflet.js
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script>
        // Initialize Map
        const map = L.map('map').setView([17.65, 99.6], 8);

        // Dark tiles from OpenStreetMap (using filter)
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        // Data Placeholder (Normally fetched from CSV)
        // I will extract key points to show the route clearly without overwhelming the map
        const travelData = [
            { lat: 18.464717, lon: 99.05675, place: "Mueang Lamphun", time: "08:04", battery: 80 },
            { lat: 18.456107, lon: 99.087873, place: "Mae Tha District", time: "08:14", battery: 78 },
            { lat: 18.392756, lon: 99.265662, place: "Hang Chat District", time: "09:01", battery: 69 },
            { lat: 18.312283, lon: 99.413179, place: "Mueang Lampang", time: "09:22", battery: 64 },
            { lat: 18.281088, lon: 99.469882, place: "Sop Tui, Lampang", time: "09:27", battery: 63 },
            { lat: 18.256232, lon: 99.655373, place: "Mae Mo District", time: "09:53", battery: 57 },
            { lat: 18.277847, lon: 99.801018, place: "Mae Mo District", time: "10:06", battery: 54 },
            { lat: 18.211666, nb: 99.871989, lat: 18.211666, lon: 99.871989, place: "Ban Pin, Long", time: "10:29", battery: 49 },
            { lat: 18.096358, lon: 99.866883, place: "Long District, Phrae", time: "10:49", battery: 46 },
            { lat: 17.97274, lon: 100.052057, place: "Den Chai District", time: "11:31", battery: 38 },
            { lat: 17.881632, lon: 100.040743, place: "Den Chai, Phrae", time: "11:41", battery: 35 },
            { lat: 17.808954, lon: 100.066603, place: "Mueang Uttaradit", time: "11:51", battery: 33 },
            { lat: 17.652857, lon: 100.122463, place: "Tha Sao, Uttaradit", time: "12:07", battery: 30 },
            { lat: 17.594402, lon: 100.093817, place: "Ban Ko, Uttaradit", time: "12:23", battery: 27 },
            { lat: 16.817458, lon: 100.25806, place: "PSRU, Phitsanulok", time: "16:23", battery: 1 },
            { lat: 16.816956, lon: 100.258004, place: "Nai Mueang, Phitsanulok", time: "17:30", battery: 40 },
            { lat: 16.813947, lon: 100.263612, place: "Nai Mueang, Phitsanulok", time: "18:27", battery: 1 },
            { lat: 16.83489, lon: 100.213659, place: "Phlai Chumphon, Phitsanulok", time: "09:06", battery: 99 },
            { lat: 16.812322, lon: 100.261597, place: "Phitsanulok Station Area", time: "19:34", battery: 1 }
        ];

        const polylinePoints = travelData.map(p => [p.lat, p.lon]);

        // Draw Line
        const polyline = L.polyline(polylinePoints, {
            color: '#38bdf8',
            weight: 4,
            opacity: 0.7,
            dashArray: '10, 10',
            lineJoin: 'round'
        }).addTo(map);

        // Add Markers
        travelData.forEach((point, index) => {
            const markerColor = (index === 0) ? '#10b981' : (index === travelData.length - 1) ? '#ef4444' : '#38bdf8';

            const circleMarker = L.circleMarker([point.lat, point.lon], {
                radius: index === 0 || index === travelData.length - 1 ? 8 : 5,
                fillColor: markerColor,
                color: "#fff",
                weight: 2,
                opacity: 1,
                fillOpacity: 1
            }).addTo(map);

            const batClass = point.battery < 20 ? 'bat-low' : point.battery < 60 ? 'bat-mid' : 'bat-high';

            const popupContent = `
            <div class="popup-info">
                <h3>${point.place}</h3>
                <p><strong>üïí Time:</strong> ${point.time}</p>
                <p><strong>üìç Coordinates:</strong> ${point.lat.toFixed(4)}, ${point.lon.toFixed(4)}</p>
                <a href="dustboy-3d-v2.html" class="project-card">
                    <div class="project-icon">üí®</div>
                    <div class="project-info">
                        <h3>DustBoy 3D Dashboard</h3>
                        <p>Real-time PM2.5 Quantum Visualization</p>
                    </div>
                </a>
                <span class="battery-tag ${batClass}">üîã Battery: ${point.battery}%</span>
            </div>
        `;

            circleMarker.bindPopup(popupContent);
        });

        // Zoom to fit polyline
        map.fitBounds(polyline.getBounds(), { padding: [50, 50] });

    </script>

</body>

</html>